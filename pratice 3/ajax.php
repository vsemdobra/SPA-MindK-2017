<?php

$data = json_decode('[{"id":1,"name":"AUDI","year":2009,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":2,"name":"VOLKSWAGEN","year":2016,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":3,"name":"AUDI","year":2011,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":4,"name":"KIA","year":2016,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":5,"name":"BMW","year":2008,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":6,"name":"HUNDAI","year":2008,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":7,"name":"FORD","year":2011,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":8,"name":"KIA","year":2013,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":9,"name":"SUZUKI","year":2014,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":10,"name":"RENAULT","year":2011,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":11,"name":"CHEVROLET","year":2009,"color":"\u0421\u0435\u0440\u044b\u0439"},{"id":12,"name":"VOLKSWAGEN","year":2008,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":13,"name":"AUDI","year":2014,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":14,"name":"ZAZ","year":2016,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":15,"name":"CHEVROLET","year":2009,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":16,"name":"SKODA","year":2017,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":17,"name":"AUDI","year":2014,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":18,"name":"ZAZ","year":2017,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":19,"name":"SKODA","year":2017,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":20,"name":"MAZDA","year":2015,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":21,"name":"CHEVROLET","year":2014,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":22,"name":"TOYOTA","year":2015,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":23,"name":"CHEVROLET","year":2013,"color":"\u0421\u0435\u0440\u044b\u0439"},{"id":24,"name":"FORD","year":2008,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":25,"name":"AUDI","year":2017,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":26,"name":"VOLKSWAGEN","year":2012,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":27,"name":"SUZUKI","year":2008,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":28,"name":"MAZDA","year":2009,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":29,"name":"TOYOTA","year":2016,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":30,"name":"MAZDA","year":2017,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":31,"name":"HUNDAI","year":2014,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":32,"name":"FORD","year":2012,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":33,"name":"LEXUS","year":2009,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":34,"name":"NISSAN","year":2012,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":35,"name":"NISSAN","year":2014,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":36,"name":"NISSAN","year":2009,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":37,"name":"HUNDAI","year":2014,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":38,"name":"BMW","year":2014,"color":"\u0421\u0438\u043d\u0438\u0439"},{"id":39,"name":"SKODA","year":2016,"color":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":40,"name":"FORD","year":2009,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":41,"name":"TOYOTA","year":2010,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":42,"name":"AUDI","year":2010,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":43,"name":"NISSAN","year":2015,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":44,"name":"LEXUS","year":2013,"color":"\u0411\u0435\u043b\u044b\u0439"},{"id":45,"name":"NISSAN","year":2012,"color":"\u0416\u0435\u043b\u0442\u044b\u0439"},{"id":46,"name":"RENAULT","year":2012,"color":"\u0421\u0435\u0440\u044b\u0439"},{"id":47,"name":"VOLKSWAGEN","year":2014,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":48,"name":"AUDI","year":2017,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":49,"name":"LEXUS","year":2009,"color":"\u0427\u0435\u0440\u043d\u044b\u0439"},{"id":50,"name":"NISSAN","year":2015,"color":"\u0411\u0435\u043b\u044b\u0439"}]', true);
/* * /
$names = ['TOYOTA', 'RENAULT', 'VOLKSWAGEN', 'SKODA', 'KIA', 'FORD', 'HUNDAI', 'NISSAN', 'BMW', 'ZAZ', 'MAZDA', 'SUZUKI', 'AUDI', 'CHEVROLET', 'LEXUS', 'MITSUBISHI'];
$colors = ['Красный', 'Синий', 'Белый', 'Желтый', 'Черный', 'Серый',];

$result = [];

for($i = 0; $i< 50; $i++) {
    $item = [];
    $item['id'] = $i+1;
    $item['name'] = $names[rand(0, count($names)-1)];
    $item['year'] = rand(1, 10)+2007;
    $item['color'] = $colors[rand(0, count($colors)-1)];
    
    $result[] = $item;
}

die(json_encode($result));
/* */

$page = (int)$_GET['page'];
if($page<1) {
    $page = 1;
}
$page--;

$field = strtolower($_GET['sort']);
if(!in_array($field, ['id', 'name', 'year', 'color'])) {
    $field = 'id';
}

$dir = strtolower($_GET['dir']);
if(!in_array($dir, ['asc', 'desc'])) {
    $dir = 'asc';
}

foreach ($data as $key => $row) {
    $sort[$key] = $row[$field];
}

array_multisort($sort, ($dir == 'asc')?SORT_ASC:SORT_DESC, $data);

echo json_encode(array_slice($data, $page*10, 10));
